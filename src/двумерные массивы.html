 <h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Двумерные массивы Паскаля &ndash; матрицы</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Двумерный массив в Паскале трактуется как одномерный массив, тип элементов которого также является массивом (массив массивов). Положение элементов в двумерных массивах Паскаля описывается двумя индексами. Их можно представить в виде прямоугольной таблицы или матрицы.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Рассмотрим двумерный массив Паскаля размерностью 3*3, то есть в ней будет три строки, а в каждой строке по три элемента:</p>
<p align="center" style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;"><img alt="Двумерные массивы Паскаля" src="http://www.pascal.helpov.net/index/images/new-13.png" style="padding: 0px; margin: 0px;"></p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Каждый элемент имеет свой номер, как у одномерных массивов, но сейчас номер уже состоит из двух чисел &ndash; номера строки, в которой находится элемент, и номера столбца. Таким образом, номер элемента определяется пересечением строки и столбца. Например, a 21 &ndash; это элемент, стоящий во второй строке и в первом столбце.</p>
<p><a name="pascal-array_1" style="padding: 0px; margin: 0px; color: #467aa7; font-weight: bold; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-size: 10px; text-align: justify; background-color: #ffffff;"></a></p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Описание двумерного массива Паскаля.</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Существует несколько способов объявления двумерного массива Паскаля.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Мы уже умеем описывать одномерные массивы, элементы которых могут иметь любой тип, а, следовательно, и сами элементы могут быть массивами. Рассмотрим следующее описание типов и переменных:</p>
<p><b class="exampleTitle" style="padding: 2px 6px; margin: 0px; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black; border-image: initial; border-bottom: none; display: inline; background: url(&quot;../images/new-1.png&quot;) #6495ed; font-size: 8pt; color: white; white-space: nowrap;">Пример описания двумерного массива Паскаля</b></p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">Type&nbsp;<br style="padding: 0px; margin: 0px;">
	Vector = array [1..5] of &lt;тип_элементов&gt;;&nbsp;<br style="padding: 0px; margin: 0px;">
	Matrix= array [1..10] of vector;&nbsp;<br style="padding: 0px; margin: 0px;">
	Var m: matrix;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Мы объявили двумерный массив Паскаля m, состоящий из 10 строк, в каждой из которых 5 столбцов. При этом к каждой i -й строке можно обращаться m [ i ], а каждому j -му элементу внутри i -й строки &ndash; m [ i , j ].</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Определение типов для двумерных массивов Паскаля можно задавать и в одной строке:</p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">Type&nbsp;<br style="padding: 0px; margin: 0px;">
	Matrix= array [1..5] of array [1..10] of &lt; тип элементов &gt;;&nbsp;<br style="padding: 0px; margin: 0px;">
	или еще проще:&nbsp;<br style="padding: 0px; margin: 0px;">
	type&nbsp;<br style="padding: 0px; margin: 0px;">
	matrix = array [1..5, 1..10] of &lt;тип элементов&gt;;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Обращение к элементам двумерного массива имеет вид: M [ i , j ]. Это означает, что мы хотим получить элемент, расположенный в i -й строке и j -м столбце. Тут главное не перепутать строки со столбцами, а то мы можем снова получить обращение к несуществующему элементу. Например, обращение к элементу M [10, 5] имеет правильную форму записи, но может вызвать ошибку в работе программы.</p>
<p><a name="pascal-array_2" style="padding: 0px; margin: 0px; color: #467aa7; font-weight: bold; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-size: 10px; text-align: justify; background-color: #ffffff;"></a></p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Основные действия с двумерными массивами Паскаля</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Все, что было сказано об основных действиях с одномерными массивами, справедливо и для матриц. Единственное действие, которое можно осуществить над однотипными матрицами целиком &ndash; это присваивание. Т.е., если в программе у нас описаны две матрицы одного типа, например,</p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">type&nbsp;<br style="padding: 0px; margin: 0px;">
	matrix= array [1..5, 1..10] of integer;&nbsp;<br style="padding: 0px; margin: 0px;">
	var&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;a , b : matrix ;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">то в ходе выполнения программы можно присвоить матрице&nbsp;<em style="padding: 0px; margin: 0px;">a</em>&nbsp;значение матрицы&nbsp;<em style="padding: 0px; margin: 0px;">b</em>&nbsp;( a := b ).&nbsp;<strong style="padding: 0px; margin: 0px;">Все остальные действия выполняются поэлементно, при этом над элементами можно выполнять все допустимые операции, которые определены для типа данных элементов массива.</strong>&nbsp;Это означает, что если массив состоит из целых чисел, то над его элементами можно выполнять операции, определенные для целых чисел, если же массив состоит из символов, то к ним применимы операции, определенные для работы с символами.</p>
<p><a name="pascal-array_3" style="padding: 0px; margin: 0px; color: #467aa7; font-weight: bold; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-size: 10px; text-align: justify; background-color: #ffffff;"></a></p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Ввод двумерного массива Паскаля.</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Для последовательного ввода элементов одномерного массива мы использовали цикл for, в котором изменяли значение индекса с 1-го до последнего. Но положение элемента в двумерном массиве Паскаля определяется двумя индексами: номером строки и номером столбца. Это значит, что нам нужно будет последовательно изменять номер строки с 1-й до последней и в каждой строке перебирать элементы столбцов с 1-го до последнего. Значит, нам потребуется два цикла for , причем один из них будет вложен в другой.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Рассмотрим пример ввода двумерного массива Паскаля с клавиатуры:</p>
<p><b class="exampleTitle" style="padding: 2px 6px; margin: 0px; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black; border-image: initial; border-bottom: none; display: inline; background: url(&quot;../images/new-1.png&quot;) #6495ed; font-size: 8pt; color: white; white-space: nowrap;">Пример программы ввода двумерного массива Паскаля с клавиатуры</b></p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">type&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;matrix= array [1..5, 1..10] of integer;&nbsp;<br style="padding: 0px; margin: 0px;">
	var&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;a, : matrix;&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;i, j: integer; { индексы массива }&nbsp;<br style="padding: 0px; margin: 0px;">
	begin&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;for i :=1 to 5 do {цикл для перебора всех строк}&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for j :=1 to 10 do {перебор всех элементов строки по столбцам}&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;readln ( a [ i , j ]); {ввод с клавиатуры элемента, стоящего в i -й строке и j -м столбце}</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Двумерный массив Паскаля можно заполнить случайным образом, т.е. использовать функцию random (N), а также присвоить каждому элементу матрицы значение некоторого выражения. Способ заполнения двумерного массива Паскаля выбирается в зависимости от поставленной задачи, но в любом случае должен быть определен каждый элемент в каждой строке и каждом столбце.</p>
<p><a name="pascal-array_4" style="padding: 0px; margin: 0px; color: #467aa7; font-weight: bold; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-size: 10px; text-align: justify; background-color: #ffffff;"></a></p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Вывод двумерного массива Паскаля на экран.</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Вывод элементов двумерного массива Паскаля также осуществляется последовательно, необходимо напечатать элементы каждой строки и каждого столбца. При этом хотелось бы, чтобы элементы, стоящие в одной строке, печатались рядом, т.е. в строку, а элементы столбца располагались один под другим. Для этого необходимо выполнить следующую последовательность действий (рассмотрим фрагмент программы для массива, описанного в предыдущем примере):</p>
<p><b class="exampleTitle" style="padding: 2px 6px; margin: 0px; border-top: 1px solid black; border-right: 1px solid black; border-left: 1px solid black; border-image: initial; border-bottom: none; display: inline; background: url(&quot;../images/new-1.png&quot;) #6495ed; font-size: 8pt; color: white; white-space: nowrap;">Пример программы вывода двумерного массива Паскаля</b></p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">for i :=1 to 5 do {цикл для перебора всех строк}&nbsp;<br style="padding: 0px; margin: 0px;">
	begin&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;for j :=1 to 10 do {перебор всех элементов строки по столбцам}&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write ( a [ i , j ]:4); {печать элементов, стоящих в i -й строке матрицы в одной экранной строке, при этом для вывода каждого элемента отводится 4 позиции}&nbsp;<br style="padding: 0px; margin: 0px;">
	&nbsp;&nbsp;&nbsp;writeln ; {прежде, чем сменить номер строки в матрице, нужно перевести курсор на начало новой экранной строки}&nbsp;<br style="padding: 0px; margin: 0px;">
	end ;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;"><strong style="padding: 0px; margin: 0px;">Замечание (<em style="padding: 0px; margin: 0px;">это важно!</em>):</strong>&nbsp;очень часто в программах студентов встречается ошибка, когда ввод с клавиатуры или вывод на экран массива пытаются осуществить следующим образом: readln (a), writeln (a), где&nbsp;<em style="padding: 0px; margin: 0px;">а</em>&nbsp;&ndash; это переменная типа массив. При этом их удивляет сообщение компилятора, что переменную этого типа невозможно считать или напечатать. Может быть, вы поймете, почему этого сделать нельзя, если представите N кружек, стоящих в ряд, а у вас в руках, например, чайник с водой. Можете вы по команде &laquo;налей воду&raquo; наполнить сразу все кружки? Как бы вы ни старались, но в каждую кружку придется наливать отдельно. Заполнение и вывод на экран элементов массива также должно осуществляться последовательно и поэлементно, т.к. в памяти ЭВМ элементы массива располагаются в последовательных ячейках.</p>
<p><a name="pascal-array_5" style="padding: 0px; margin: 0px; color: #467aa7; font-weight: bold; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-size: 10px; text-align: justify; background-color: #ffffff;"></a></p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Представление двумерного массива Паскаля в памяти</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Элементы абстрактного массива в памяти машины физически располагаются последовательно, согласно описанию. При этом каждый элемент занимает в памяти количество байт, соответствующее его размеру. Например, если массив состоит из элементов типа integer , то каждый элемент будет занимать по два байта. А весь массив займет S^2 байта, где S &ndash; количество элементов в массиве.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">А сколько места займет массив, состоящий из массивов, т.е. матрица? Очевидно: S i^S j , где S i - количество строк, а S j &ndash; количество элементов в каждой строке. Например, для массива типа</p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">Matrix = array [1..3, 1..2] of integer ;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">потребуется 12 байт памяти.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Как будут располагаться в памяти элементы этого массива? Рассмотрим схему размещения массива M типа matrix в памяти.</p>
<p align="center" style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;"><img alt="Размещение двумерного массива Паскаля в памяти" src="http://www.pascal.helpov.net/index/images/new-12.png" style="padding: 0px; margin: 0px;"></p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Под каждый элемент M [i,j] типа integer выделяется две ячейки памяти. Размещение в памяти осуществляется &laquo;снизу вверх&raquo;. Элементы размещаются в порядке изменения индекса, что соответствует схеме вложенных циклов: сначала размещается первая строка, затем вторая, третья... Внутри строки по порядку идут элементы: первый, второй и т.д.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Как мы знаем, доступ к любой переменной возможен, только если известен адрес ячейки памяти, в которой хранится переменная. Конкретная память выделяется для переменной при загрузке программы, то есть устанавливается взаимное соответствие между переменной и адресом ячейки. Но если мы объявили переменную как массив, то программа &laquo;знает&raquo; адрес начала массива, то есть первого его элемента. Как же происходит доступ ко всем другим элементам массива? При реальном доступе к ячейке памяти, в которой хранится элемент двумерного массива, система вычисляет ее адрес по формуле:</p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">Addr + SizeElem * Cols *( I -1)+ SizeElem *( J -1),</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">где Addr &ndash; фактический начальный адрес, по которому массив располагается в памяти; I , J &ndash; индексы элемента в двумерном массиве; SizeElem &ndash; размер элемента массива (например, два байта для элементов типа integer ); Cols &ndash; количество элементов в строке.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Выражение SizeElem * Cols *( I -1)+ SizeElem *( J -1) называют смещением относительно начала массива.</p>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">Сколько памяти выделяется для массива?</h3>
<h3 style="padding: 0px; margin: 0px 0px 0.5em; clear: both; font-family: &quot;trebuchet ms&quot;, arial, sans-serif; font-weight: normal; font-size: 20px; text-align: justify; background-color: #ffffff;">&nbsp;</h3>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Рассмотрим не столько вопрос о том, сколько памяти выделяется под массив (это мы разобрали в предыдущем разделе), а о том, каков максимально допустимый размер массива, учитывая ограниченный объем памяти.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Для работы программы память выделяется сегментами по 64 Кбайт каждый, причем как минимум один из них определяется как&nbsp;<strong style="padding: 0px; margin: 0px;">сегмент данных</strong>. Вот в этом-то сегменте и располагаются те данные, которые будет обрабатывать программа. Ни одна переменная программы не может располагаться более чем в одном сегменте. Поэтому, даже если в сегменте находится только одна переменная, описанная как массив, то она не сможет получить более чем 65536 байт. Но почти наверняка, кроме массива в сегменте данных будут описаны еще некоторые переменные, поэтому реальный объем памяти, который может быть выделен под массив, находится по формуле: 65536- S , где S &ndash; объем памяти, уже выделенный под другие переменные.</p>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Зачем нам это знать? Для того чтобы не удивляться, если при компиляции транслятор выдаст сообщение об ошибке объявления слишком длинного массива, когда в программе встретит описание (правильное с точки зрения синтаксиса):</p>
<div class="example" style="padding: 7px; margin: 0px 0px 1em; border: 3px double #634f36; background: #f5f5f5; font-family: &quot;Courier New&quot;, Courier, monospace; font-size: 8pt;">Type myArray= array [1..50000] of integer;</div>
<p style="padding: 0px; margin: 0px 0px 1em; line-height: 1.5em; font-size: 12px;">Вы уже знаете, что, учитывая двухбайтовое представление целых чисел, реально можно объявить массив с количеством элементов равным 65536/2 &ndash;1=32767. И то лишь в том случае, если других переменных не будет. Двумерные массивы должны иметь еще меньшие границы индексов.</p>
